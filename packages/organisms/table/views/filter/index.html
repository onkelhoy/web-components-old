<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Component: TableFilter</title>

  <link rel="icon" type="image/x-icon" href="favicon.ico">

  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />

  <script defer src="main.js"></script>
</head>

<body>
  <doc-card columns="">
    <pap-typography slot="header" variant="C2">Dynamic</pap-typography>
    <pap-codeblock display="both">
      <pap-table-filter></pap-table-filter>
    </pap-codeblock>
  </doc-card>

  <doc-card columns="">
    <pap-typography slot="header" variant="C2">Static</pap-typography>
    <pap-codeblock display="both">
      <pap-table-filter>
        <form>
          <div>
            <pap-input label="static-field1" name="static-field1"></pap-input>
          </div>

          <pap-input label="static-field2" name="static-field2"></pap-input>
          <pap-input label="static-field3" name="static-field3"></pap-input>
          <pap-input label="static-field4" name="static-field4"></pap-input>
        </form>
      </pap-table-filter>

      <script>
        const currentScript = document.currentScript;

        document.addEventListener("DOMContentLoaded", () => {
          if (currentScript) {
            const filter = currentScript.closest('pap-codeblock').originalQuerySelector('pap-table-filter');
            const form = currentScript.closest('pap-codeblock').originalQuerySelector('form');

            filter.addEventListener('apply', () => {
              form.requestSubmit();
            });
            filter.addEventListener('reset', () => {
              form.reset();
            })

            form.addEventListener('submit', (e) => {
              e.preventDefault();
              console.log(Array.from(new FormData(e.target)))
            });
          }
        })
      </script>
    </pap-codeblock>
  </doc-card>
</body>

</html>